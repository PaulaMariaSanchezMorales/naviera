#pragma checksum "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3a709432fdb639e58cfc6f555a0523fa3a117851"
// <auto-generated/>
#pragma warning disable 1591
namespace ProyectoMaersk.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using ProyectoMaersk;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\_Imports.razor"
using ProyectoMaersk.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
using Microsoft.AspNetCore.WebUtilities;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
using Microsoft.Extensions.Configuration;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
using MySqlConnector;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
using Clases;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(BlankLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/Facturas")]
    public partial class Facturas : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "body");
            __builder.AddAttribute(1, "onload", "window.print()");
            __builder.AddMarkupContent(2, @"<div class=""row""><div class=""col-sm-4 mb-3""><img src=""https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/Maersk_Group_Logo.svg/1280px-Maersk_Group_Logo.svg.png"" class=""img-fluid"" width=""500"" height=""400"">
            <br>
            <br></div>
        <div class=""col-sm-8 mb-3""><br>
            <br>
            <div class=""d-flex p-3 bd-highlight bg-tertiary""></div></div></div>

    ");
            __builder.AddMarkupContent(3, "<h1><div class=\"d-flex p-2 bd-highlight bg-secondary\">Facturación</div>\r\n        <br></h1>\r\n    \r\n    ");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "container");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "row");
            __builder.AddMarkupContent(8, "<div class=\"col-sm-4 mb-3\"><h4 for=\"empresa\" class=\"font-weight-bold\">Empresa: </h4></div>\r\n            ");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "col-sm-8 mb-3");
            __builder.OpenElement(11, "div");
            __builder.OpenElement(12, "h4");
            __builder.AddAttribute(13, "id", "empresa");
            __builder.AddContent(14, 
#nullable restore
#line 38 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
                                      reserva.Empresa

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n        ");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "row");
            __builder.AddMarkupContent(18, "<div class=\"col-sm-4 mb-3\"><h4 for=\"nit\" class=\"font-weight-bold\">ID tributario: </h4></div>\r\n            ");
            __builder.OpenElement(19, "div");
            __builder.AddAttribute(20, "class", "col-sm-8 mb-3");
            __builder.OpenElement(21, "div");
            __builder.OpenElement(22, "h4");
            __builder.AddAttribute(23, "id", "nit");
            __builder.AddContent(24, 
#nullable restore
#line 48 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
                                  reserva.Nit

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(25, "\r\n        ");
            __builder.OpenElement(26, "div");
            __builder.AddAttribute(27, "class", "row");
            __builder.AddMarkupContent(28, "<div class=\"col-sm-4 mb-3\"><h4 for=\"codigo\" class=\"font-weight-bold\">Código de contenedor: </h4></div>\r\n            ");
            __builder.OpenElement(29, "div");
            __builder.AddAttribute(30, "class", "col-sm-8 mb-3");
            __builder.OpenElement(31, "div");
            __builder.OpenElement(32, "h4");
            __builder.AddAttribute(33, "id", "codigo");
            __builder.AddContent(34, 
#nullable restore
#line 58 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
                                     reserva.Codigo

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(35, "\r\n        <br>\r\n        <br>\r\n        <br>\r\n        ");
            __builder.OpenElement(36, "div");
            __builder.AddAttribute(37, "class", "row");
            __builder.AddMarkupContent(38, "<div class=\"col-sm-4 mb-3\"><h4>Flete marítimo internacional</h4></div>\r\n            ");
            __builder.AddMarkupContent(39, "<div class=\"col-sm-2 mb-3\"><h4>US $</h4></div>\r\n            ");
            __builder.AddMarkupContent(40, "<div class=\"col-sm-4 mb-3\"><h4>29 toneladas * </h4></div>\r\n            ");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "col-sm-2 mb-3");
            __builder.OpenElement(43, "h4");
            __builder.AddAttribute(44, "id", "valor");
            __builder.AddContent(45, 
#nullable restore
#line 76 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
                                reserva.Valor

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n        ");
            __builder.AddMarkupContent(47, @"<div class=""row""><div class=""col-sm-4 mb-3""><h4>Desplazamiento contenedor</h4></div>
            <div class=""col-sm-2 mb-3""><h4>US $</h4></div>
            <div class=""col-sm-4 mb-3""><h4></h4></div>
            <div class=""col-sm-2 mb-3""><h4>$ 150.00</h4></div></div>
        ");
            __builder.AddMarkupContent(48, @"<div class=""row""><div class=""col-sm-4 mb-3""><h4>Recargo de combustible</h4></div>
            <div class=""col-sm-2 mb-3""><h4>US $</h4></div>
            <div class=""col-sm-4 mb-3""><h4></h4></div>
            <div class=""col-sm-2 mb-3""><h4>$ 100.00</h4></div></div>
        ");
            __builder.AddMarkupContent(49, @"<div class=""row""><div class=""col-sm-4 mb-3""><h4>Ajuste tipo de cambio</h4></div>
            <div class=""col-sm-2 mb-3""><h4>US $</h4></div>
            <div class=""col-sm-4 mb-3""><h4></h4></div>
            <div class=""col-sm-2 mb-3""><h4>$ 100.00</h4></div></div>
        ");
            __builder.AddMarkupContent(50, @"<div class=""row""><div class=""col-sm-4 mb-3""><h4>Gastos de documentación</h4></div>
            <div class=""col-sm-2 mb-3""><h4>US $</h4></div>
            <div class=""col-sm-4 mb-3""><h4></h4></div>
            <div class=""col-sm-2 mb-3""><h4>$ 300.00</h4></div></div>
        ");
            __builder.AddMarkupContent(51, @"<div class=""row""><div class=""col-sm-4 mb-3""><h4>Tasas portuarias</h4></div>
            <div class=""col-sm-2 mb-3""><h4>US $</h4></div>
            <div class=""col-sm-4 mb-3""><h4></h4></div>
            <div class=""col-sm-2 mb-3""><h4>$ 300.00</h4></div></div>
        <div class=""d-flex p-1 bd-highlight bg-dark""></div>
        <br>
        ");
            __builder.OpenElement(52, "div");
            __builder.AddAttribute(53, "class", "row");
            __builder.AddMarkupContent(54, "<div class=\"col-sm-4 mb-3\"><h4 class=\"font-weight-bold\">Total de facturación</h4></div>\r\n            ");
            __builder.AddMarkupContent(55, "<div class=\"col-sm-2 mb-3\"><h4 class=\"font-weight-bold\">US $</h4></div>\r\n            ");
            __builder.AddMarkupContent(56, "<div class=\"col-sm-4 mb-3\"><h4></h4></div>\r\n            ");
            __builder.OpenElement(57, "div");
            __builder.AddAttribute(58, "class", "col-sm-2 mb-3");
            __builder.OpenElement(59, "h4");
            __builder.AddAttribute(60, "class", "font-weight-bold");
            __builder.AddContent(61, "$ ");
            __builder.AddContent(62, 
#nullable restore
#line 162 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
                                                reserva.Total_Factura

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(63, ".00");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 170 "C:\Users\pmari\Google Drive\2021\C5\2. proyecto de prácticas\naviera\ProyectoMaersk\Pages\Facturas.razor"
 
    //generación de las listas que se van a leer
    int Id = 0;
    Reserva reserva = new Reserva();

    List<Pais> Paises_Origen = new List<Pais>(); //listado de los países existentes
    List<Pais> Paises_Destino = new List<Pais>();

    List<Puerto> Puertos_Origen = new List<Puerto>();
    List<Puerto> Puertos_Destino = new List<Puerto>();

    List<Tipo_carga> Tipo_Carga = new List<Tipo_carga>();

    List<Valor> Valores = new List<Valor>();

    List<Tipo_contenedor> Tipo_Contenedores = new List<Tipo_contenedor>();

    //se inicializa la base de datos
    protected override void OnInitialized() //inicializando la lectura de los datos
    {
        var uri = NavManager.ToAbsoluteUri(NavManager.Uri);
        if (QueryHelpers.ParseQuery(uri.Query).TryGetValue("Id", out var param))
        {
            String parametro = param.First();
            if (parametro != null)
            {
                Int32.TryParse(parametro, out Id);
            }
        }

        String connString = config.GetConnectionString("MySqlNaviera");
        using var connection = new MySqlConnection(connString);
        {
            //abrir conexión a la base de datos
            connection.Open();
            String q = "SELECT * FROM reserva_contenedor where id = '" + Id + "';"; //se busca por ID, el cual es único

            using var command = new MySqlCommand(q, connection);
            using var reader = command.ExecuteReader();
            while (reader.Read())
            {
                reserva.Id = (int)reader["id"];
                reserva.Codigo = reader["Codigo_contenedor"].ToString();
                reserva.Empresa = reader["Empresa"].ToString();
                reserva.Nit = reader["Nit"].ToString();
                reserva.Direccion = reader["Direccion"].ToString();
                reserva.Puerto_Origen = reader["Puerto_Origen"].ToString();
                reserva.Pais_Origen = reader["Pais_Origen"].ToString();
                reserva.Hora_Salida = reader["Hora_Salida"].ToString();
                reserva.Puerto_Destino = reader["Puerto_Destino"].ToString();
                reserva.Pais_Destino = reader["Pais_Destino"].ToString();
                reserva.Hora_Llegada = reader["Hora_Llegada"].ToString();
                reserva.Receptor = reader["Receptor"].ToString();
                reserva.Contraseña_Recepcion = reader["Contraseña_Recepcion"].ToString();
                reserva.Tipo_Carga = reader["Tipo_Carga"].ToString();
                reserva.Descripcion = reader["Descripcion_carga"].ToString();
                reserva.Peso = reader["Peso_carga"].ToString();
                reserva.Valor = reader["Valor_carga"].ToString();
                reserva.Tipo_Contenedor = reader["Tipo_Contenedor"].ToString();
                //convertir el valor de la reserva a double para poderlo sumar con otro valor
                double valordelareserva = 0;
                double.TryParse(reserva.Valor.Substring(2,7), out valordelareserva); //utilizar datos desde la posición 2 hasta la 7, y que salga como valordelareserva
                double totalfactura = valordelareserva + 950.00;
                reserva.Total_Factura = totalfactura.ToString();
            }
        }

        //para que aparezca el nombre del puerto y no el código
        using var connectionPO = new MySqlConnection(connString);
        {
            connectionPO.Open();

            string qPO = "SELECT * FROM puertos where codigo = '" + reserva.Puerto_Origen + "'";
            using var commandPO = new MySqlCommand(qPO, connectionPO);
            using var readerPO = commandPO.ExecuteReader(); //devuelve un objeto para poder hacer consultas, en este caso q
            if (readerPO.Read())
            {
                reserva.Nombre_Puerto_Origen = readerPO["nombre"].ToString();
            }
        }

        using var connectionPD = new MySqlConnection(connString);
        {
            connectionPD.Open();

            string qPD = "SELECT * FROM puertos where codigo = '" + reserva.Puerto_Destino + "'";
            using var commandPD = new MySqlCommand(qPD, connectionPD);
            using var readerPD = commandPD.ExecuteReader(); //devuelve un objeto para poder hacer consultas, en este caso q
            if (readerPD.Read())
            {
                reserva.Nombre_Puerto_Destino = readerPD["nombre"].ToString();
            }
        }
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.Extensions.Configuration.IConfiguration config { get; set; }
    }
}
#pragma warning restore 1591
